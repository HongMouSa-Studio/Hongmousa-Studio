<div class="nav-mobile-inner" style="padding: 1rem;">
  <ul style="display: flex; flex-direction: column; gap: 0.5rem;">
    <li><a href="{{ "/" | relLangURL }}" class="mobile-nav-link">{{ i18n "nav_home" }}</a></li>
    <li><a href="{{ "products/" | relLangURL }}" class="mobile-nav-link">{{ i18n "nav_products" }}</a></li>
    <li><a href="{{ "blog/" | relLangURL }}" class="mobile-nav-link">{{ i18n "nav_blog" }}</a></li>
    <li><a href="{{ "about/" | relLangURL }}" class="mobile-nav-link">{{ i18n "nav_about" }}</a></li>
    <li><a href="{{ "contact/" | relLangURL }}" class="mobile-nav-link">{{ i18n "nav_contact" }}</a></li>
  </ul>

  <!-- Styled Mobile Language Switcher -->
  <div class="lang-mobile-group" style="margin-top: 1.5rem; border-top: 1px solid #eee; padding-top: 1rem;">
    <!-- Earth icon + Label -->
    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.8rem; color: #888; padding-left: 0.5rem;">
       <span>üåê</span>
       <span style="font-size: 0.85rem;">Language</span>
    </div>

    <!-- Language Pills -->
    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
      {{ $currentLang := .Site.Language.Lang }}
      {{ $currentUrl := .Page.RelPermalink }}
      
      {{ range .Site.Languages }}
        {{ $active := eq .Lang $currentLang }}
        
        <!-- Calculate Target URL: Replace current /lang/ with target /lang/ -->
        {{ $targetUrl := "" }}
        {{ $currentPrefix := printf "/%s/" $currentLang }}
        {{ $targetPrefix := printf "/%s/" .Lang }}
        
        {{ if in $currentUrl $currentPrefix }}
            {{ $targetUrl = replace $currentUrl $currentPrefix $targetPrefix }}
        {{ else }}
            <!-- Fallback if prefix not found (shouldn't happen with subdir: true) -->
            {{ $targetUrl = $targetPrefix }} 
        {{ end }}

        <a href="{{ $targetUrl }}" class="lang-pill {{ if $active }}active{{ end }}" 
           style="{{ if $active }}background: var(--text-dark); color: white;{{ else }}background: #f3f4f6; color: #333;{{ end }} padding: 6px 14px; border-radius: 99px; font-size: 0.9rem; text-decoration: none; transition: background 0.2s;">
           {{ .LanguageName }}
        </a>
      {{ end }}
    </div>
  </div>
</div>