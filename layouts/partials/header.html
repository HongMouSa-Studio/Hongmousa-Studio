<!-- (Tiān-siong Style) -->
<header class="header">
  
  <div class="nav-container">

    <!-- Logo + Site Title -->
    <a href="{{ "/" | relLangURL }}" class="logo-block">
      <div>
        <img src="/img/HongMouSa Logo.png" alt="HongMouSa Studio Logo" />
      </div>
    
      <div class="site-title">
        <div class="site-title-l1">Hong-mô͘-sa Kang-chok-sek</div>
        <div class="site-title-l2">芳芼莎工作室</div>
        <div class="site-title-l3">HongMouSa Studio</div>
      </div>
    </a>

    <!-- Desktop Navigation -->
    {{ partial "nav.html" . }}

    <!-- Language Switcher (desktop only) -->
    <div class="lang-desktop">
      {{ partial "lang-switch.html" . }}
    </div>
    
    <!-- Hamburger (mobile only) -->
    <div class="menu-toggle">☰</div>

    <!-- Icons (Search, User, Cart) -->
            <div class="icons-group">
                <button><i class="fa-solid fa-magnifying-glass"></i></button>
                <button class="hidden-on-mobile"><i class="fa-regular fa-user"></i></button>
                
                <!-- SNIPCART CHECKOUT BUTTON -->
                <button class="snipcart-checkout">
                    <i class="fa-solid fa-cart-shopping"></i>
                    <!-- Kò͘-bu̍t-chhia sò͘-liōng -->
                    <span class="snipcart-items-count cart-count">0</span>
                </button>
            </div>
  </div>
  
  <!-- Mobile Hamburger dropdown -->
  <div id="menuMobile" class="menu-mobile">
    
    <nav class="nav-mobile">
      {{ partial "nav-mobile.html" . }}
    </nav>

    <!-- mobile language -->
    <div class="lang-mobile">
      {{ partial "lang-switch.html" . }}
    </div>
  </div>
</header>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const btn = document.querySelector('.menu-toggle');
  const menu = document.getElementById('menuMobile');

  if (!btn || !menu) return;

  // accessibility
  btn.setAttribute('aria-controls', 'menuMobile');
  btn.setAttribute('aria-expanded', 'false');
  btn.setAttribute('role', 'button');

  btn.addEventListener('click', function (e) {
    const isOpen = menu.classList.toggle('show');
    btn.setAttribute('aria-expanded', String(isOpen));
  });

  // close when clicking outside
  document.addEventListener('click', function (e) {
    if (!menu.classList.contains('show')) return;
    if (menu.contains(e.target) || btn.contains(e.target)) return;
    menu.classList.remove('show');
    btn.setAttribute('aria-expanded', 'false');
  });
});
</script>

