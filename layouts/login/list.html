{{ define "main" }}
<section class="auth-page">

  <header class="auth-header">
    <h1>{{ .Title }}</h1>
    {{ with .Params.subtitle }}
      <p class="auth-subtitle">{{ . }}</p>
    {{ end }}
  </header>

  <div class="auth-card">
    
    <!-- 1. OTP login (Primary now) -->
    <div class="auth-section">
      
      <!-- Step 1: Send Email -->
      <div id="step-email">
        <div class="form-group">
          <label for="login-email" class="sr-only">{{ i18n "auth_email_label" }}</label>
          <input
            type="email"
            id="login-email"
            class="form-control"
            placeholder="{{ i18n "auth_email_placeholder" }}"
            required
          />
        </div>
        <button id="send-otp-btn" class="btn-main">
          {{ i18n "auth_send_code_btn" }}
        </button>
      </div>

      <!-- Step 2: Verify OTP (Hidden by default) -->
      <div id="step-otp" class="hidden">
        <p style="margin-bottom: 1rem; font-size: 0.9rem; color: #666;">{{ i18n "auth_otp_instruction" }}</p>
        <div class="form-group">
          <label for="login-otp" class="sr-only">{{ i18n "auth_otp_label" }}</label>
          <input
            type="text"
            id="login-otp"
            class="form-control"
            placeholder="12345678"
          />
        </div>
        <button id="verify-otp-btn" class="btn-main">
          {{ i18n "auth_verify_btn" }}
        </button>
      </div>

      <p id="otp-message" 
         class="auth-message" 
         data-success-msg="{{ i18n "auth_code_sent_msg" }}"
         style="margin-top: 1rem; color: var(--accent-green); font-size: 0.9rem;">
      </p>
    </div>

    <!-- 2. Divider -->
    <div class="auth-divider" style="margin: 1.5rem 0; color: #999; font-size: 0.9rem;">
      <span>{{ i18n "auth_divider_text" }}</span>
    </div>

    <!-- 3. Google login (Secondary now) -->
    <div class="auth-section">
      <button id="google-login" class="google-btn">
        <i class="fa-brands fa-google"></i>
        {{ i18n "auth_google_btn" }}
      </button>
    </div>

  </div>
</section>

<!-- Supabase auth -->
<script type="module" src="/js/login.js"></script>
{{ end }}
